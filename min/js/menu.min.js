export const menuInit=container=>{const currentUrl=window.location.href;let currentPage=currentUrl.split("/").pop();currentPage=""===currentPage?"/":currentPage,gsap.registerPlugin(CustomEase),CustomEase.create("hop","M0,0 C0.091,0.543 0.148,0.662 0.277,0.786 0.405,0.909 0.596,0.979 1,1 ");const hamburger=container.querySelector(".hamburger"),menu=container.querySelector(".menu"),menuItems=container.querySelectorAll(".menu-item");let isMenuOpen=!1;function splitTextIntoSpans(selector){let elements;container.querySelectorAll(selector).forEach(element=>{let text,splitText=element.innerText.split("").map((function(char){return`<span>${" "===char?"&nbsp;&nbsp;":char}</span>`})).join("");element.innerHTML=splitText})}splitTextIntoSpans(".menu-link-p");const hoverHeadings=container.querySelectorAll(".menu-link-hover2 > .menu-link-p > span"),mainHeadings=container.querySelectorAll(".menu-link-main > .menu-link-p"),mainHeadingsChars=container.querySelectorAll(".menu-link-main > .menu-link-p > span");gsap.set(mainHeadingsChars,{xPercent:350}),gsap.set(hoverHeadings,{xPercent:-350});const handleMenu=()=>{gsap.to(menu,{width:isMenuOpen?"0vw":"100vw",duration:1,ease:"hop"}),gsap.to(".menu-item",{justifyContent:isMenuOpen?"center":"flex-start",duration:1,ease:"power3.out",onComplete:()=>{isMenuOpen=!isMenuOpen,menuItems.forEach(menuItem=>{isMenuOpen?menuItem.classList.add("menu-opened"):menuItem.classList.remove("menu-opened")}),isMenuOpen?menuItemHoverAnimations(container):removeMenuItemHoverAnimations(container)}}),mainHeadings.forEach(mainHeading=>{const menuItemLetters=mainHeading.querySelectorAll("span");gsap.to(menuItemLetters,{delay:.25,xPercent:0,duration:1,stagger:.075,ease:"power3.out"})})};hamburger.addEventListener("click",handleMenu),menuItems.forEach(link=>{if(link.getAttribute("href")===`/${currentPage}`||"/"===link.getAttribute("href")&&"/"===currentPage){const spans=link.querySelectorAll("span");gsap.set(spans,{color:"grey"});const currentEmoji=link.querySelector(".menu-emoji");currentEmoji.textContent="❌"}}),menuItems.forEach(menuItem=>{menuItem.addEventListener("click",event=>{const clickedUrl=event.currentTarget.href;currentUrl!==clickedUrl?(removeMenuItemHoverAnimations(container),hideHamburger(),stopRocking(menuItem.querySelector(".menu-img"))):event.preventDefault()})})};const hideHamburger=()=>{gsap.to(".hamburger",{autoAlpha:0,duration:.5,ease:"power5.inOut"})};function startRocking(element){gsap.set(element,{rotation:-2.5,x:-2}),gsap.to(element,{rotation:2.5,duration:1.5,ease:"sine.inOut",yoyo:!0,repeat:-1,transformOrigin:"center bottom",x:2})}function stopRocking(element){gsap.getTweensOf(element).forEach(tween=>tween.kill()),gsap.to(element,{rotation:0,x:0,duration:.5})}const handleMouseEnter=menuItem=>{const menuItemLettersMain=menuItem.querySelectorAll(".menu-link-main > .menu-link-p span");gsap.to(menuItemLettersMain,{xPercent:350,opacity:0,duration:1,stagger:.075,ease:"power3.out"});const menuItemLettersHover=menuItem.querySelectorAll(".menu-link-hover2 > .menu-link-p span");gsap.to(menuItemLettersHover,{xPercent:0,opacity:1,duration:1,stagger:.075,ease:"power3.out"});const menuImg=menuItem.querySelector(".menu-img");gsap.to(menuImg,{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",duration:.175,ease:"power5.inOut",onComplete:()=>{startRocking(menuImg)}})},handleMouseLeave=menuItem=>{const menuItemLettersMain=menuItem.querySelectorAll(".menu-link-main > .menu-link-p span");gsap.to(menuItemLettersMain,{xPercent:0,opacity:1,duration:1,stagger:.075,ease:"power3.out"});const menuItemLettersHover=menuItem.querySelectorAll(".menu-link-hover2 > .menu-link-p span");gsap.to(menuItemLettersHover,{xPercent:-350,opacity:0,duration:1,stagger:.075,ease:"power3.out"});const menuImg=menuItem.querySelector(".menu-img");stopRocking(menuImg),gsap.to(menuImg,{clipPath:"polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%)",duration:.075,ease:"power5.inOut"})},createMouseEnterHandler=menuItem=>()=>handleMouseEnter(menuItem),createMouseLeaveHandler=menuItem=>()=>handleMouseLeave(menuItem),menuItemHoverAnimations=container=>{const menuItems=container.querySelectorAll(".menu-item.menu-opened");menuItems.forEach(menuItem=>{menuItem._mouseEnterHandler=createMouseEnterHandler(menuItem),menuItem._mouseLeaveHandler=createMouseLeaveHandler(menuItem),menuItem.addEventListener("mouseenter",menuItem._mouseEnterHandler),menuItem.addEventListener("mouseleave",menuItem._mouseLeaveHandler)})},removeMenuItemHoverAnimations=container=>{const menuItems=container.querySelectorAll(".menu-item");menuItems.forEach(menuItem=>{menuItem._mouseEnterHandler&&menuItem.removeEventListener("mouseenter",menuItem._mouseEnterHandler),menuItem._mouseLeaveHandler&&menuItem.removeEventListener("mouseleave",menuItem._mouseLeaveHandler)})};